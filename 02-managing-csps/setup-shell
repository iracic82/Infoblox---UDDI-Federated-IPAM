#!/bin/bash

#
# Instruqt Setup Script – UDDI IPAM + Multi-Cloud Discovery
#

echo "🚀 Starting setup script for UDDI IPAM lab..."
set -euxo pipefail

set-workdir /root/infoblox-lab
cd /root/infoblox-lab/uddi-ipam/scripts || {
    echo "❌ Failed to enter /root/infoblox-lab/uddi-ipam/scripts"
    exit 1
}

# === Discovery Deployments ===
echo "📦 Deploying AWS discovery..."
python3 deploy_aws_discovery_final.py || echo "❌ AWS discovery failed, continuing..."
sleep 120

echo "📦 Deploying Azure discovery..."
python3 deploy_azure_discovery.py || echo "❌ Azure discovery failed, continuing..."
sleep 120