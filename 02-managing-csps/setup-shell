#!/bin/bash

#
# Instruqt Setup Script â€“ UDDI IPAM + Multi-Cloud Discovery
#

echo "ğŸš€ Starting setup script for UDDI IPAM lab..."
set -euxo pipefail

set-workdir /root/infoblox-lab
cd /root/infoblox-lab/uddi-ipam/scripts || {
    echo "âŒ Failed to enter /root/infoblox-lab/uddi-ipam/scripts"
    exit 1
}

# === Discovery Deployments ===
echo "ğŸ“¦ Deploying AWS discovery..."
python3 deploy_aws_discovery_final.py || echo "âŒ AWS discovery failed, continuing..."
sleep 120

echo "ğŸ“¦ Deploying Azure discovery..."
python3 deploy_azure_discovery.py || echo "âŒ Azure discovery failed, continuing..."
sleep 120